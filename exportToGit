#!/bin/bash

# copy all relevant files to current folder

# scripts
cp -r ~/.bin ./

# configs
mkdir .config
cd .config
mkdir bspwm && cp ~/.config/bspwm/* ./bspwm
mkdir sxhkd && cp ~/.config/sxhkd/* ./sxhkd
mkdir polybar && cp ~/.config/polybar/* ./polybar
cd ..

# backgrounds
mkdir .background
cp ~/.background/background.png ./.background/

# rEFInd
mkdir refind
cp /boot/efi/EFI/refind/custom* ./refind
cp -r /boot/efi/EFI/refind/themes ./refind

# xinit
cp ~/.xinitrc ./

# X resources
cp ~/.Xresources ./

# zsh
cp ~/.zprofile ./
cp ~/.zshenv ./
cp ~/.zshrc ./

# create commit with given message, or a default
git add .
if [[ "$1" != "" ]]
then
    git commit -m "$@"
else
    git commit -m "Updated dotfiles"
fi

# push to git
git push

# clean up files
rm `find . ! -ipath '*.git*' ! -iname '*.md' ! -name 'exportToGit' ! -name 'importFromGit' ! -name '.'`
